[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Supplier", 
  "modified": "2018-09-22 07:48:11.255581", 
  "name": "Supplier-Client", 
  "script": "frappe.ui.form.on('Supplier', {\n    onload: function (doc, dt, dn) {\n        if (doc.is_new() != 1) {\n            frappe.call({\n                method: \"empowery_co_op.api.get_linked_customer\",\n                args: {\n                    suppname: cur_frm.doc.supplier_name,\n                },\n                callback: function (r) {\n                    if (!r.message) {\n                        const html = `There is no customer linked data for ` + cur_frm.doc.supplier_name\n                        $(cur_frm.fields_dict.linked_customer_data.wrapper).html(html);\n                    }\n                    const linked_customer_data = r.message;\n                    if (linked_customer_data) {\n                        const html = `\n                        <table class=\"table table-bordered\">\n                            <thead><tr><th>${__(\"#\")}</th><th>${__(\"Type\")}</th><th>${__(\"Customer Name\")}</th><th>${__(\"Created Date\")}</th></tr></thead>\n                            <tbody>\n                                ${linked_customer_data.map((c,i) => `<tr><td>${i+1}</td><td>${c.link_doctype}</td><td>${c.link_name}</td>\n                                    <td>${c.join_date}</td></tr>`\n                                ).join('')}\n                            </tbody>\n                        </table>`\n                        $(cur_frm.fields_dict.linked_customer_data.wrapper).html(html);\n                    }\n                }\n            });\n        }\n    },\n    onload_post_render: function (frm) {\n        if(!frm.doc.offer_headline){\n            headline_length = 'Allowed Tags:{exp_dt},&lt;br&gt;' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'Current char count-0'+ ' Max-50'\n            frm.set_df_property('offer_headline', 'description', headline_length);\n        }else{\n            headline_length = 'Allowed Tags:{exp_dt},&lt;br&gt;' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'Current char count-' + frm.doc.offer_headline.length + ' Max-50'\n            frm.set_df_property('offer_headline', 'description', headline_length);\n        }\n        if(!frm.doc.offer_summary){\n            summary_length = 'Allowed Tag: &lt;br&gt;' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'Current char count-0' + ' Max-42'\n            frm.set_df_property('offer_summary', 'description', summary_length);\n        }else{\n            summary_length = 'Allowed Tag: &lt;br&gt;' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'Current char count-' + frm.doc.offer_summary.length + ' Max-42'\n            frm.set_df_property('offer_summary', 'description', summary_length);\n        }\n    },\n\n    offer_headline: function (frm) {\n        headline_length = 'Allowed Tags:{exp_dt},&lt;br&gt;' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'Current char count-' + frm.doc.offer_headline.length + ' Max-50'\n        frm.set_df_property('offer_headline', 'description', headline_length);\n    },\n    offer_summary: function (frm) {\n        summary_length = 'Allowed Tag: &lt;br&gt;' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'Current char count-' + frm.doc.offer_summary.length + ' Max-42'\n        frm.set_df_property('offer_summary', 'description', summary_length);\n    },\n    validate: function (frm) {\n        if (frm.doc.display_on_partner_listing_page == 1) {\n            if (!(frm.doc.service_category) || (frm.doc.geo_location.length == 0)) {\n                var msg = \"For vendor listing, 'service category' and 'geo location' are mandatory\";\n                msgprint(msg);\n                throw msg;\n            }\n        }\n    }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2018-09-14 21:42:59.670290", 
  "name": "Customer-Client", 
  "script": "frappe.ui.form.on('Customer', {\n    onload: function (doc, dt, dn) {\n        if (doc.is_new() != 1) {\n        frappe.call({\n            method: \"empowery_co_op.api.get_linked_supplier\",\n            args: {\n                custname: cur_frm.doc.customer_name,\n            },\n            callback: function (r) {\n                if (!r.message) {\n                    const html = `There is no supplier linked data for `+cur_frm.doc.customer_name\n                    $(cur_frm.fields_dict.linked_supplier_data.wrapper).html(html);\n                }\n                const linked_supplier_data = r.message;\n                console.log(r.message)\n                console.log(linked_supplier_data)\n                if (linked_supplier_data) {\n                    const html = `\n                        <table class=\"table table-bordered\">\n                            <thead><tr><th>${__(\"#\")}</th><th>${__(\"Type\")}</th><th>${__(\"Suppier Name\")}</th><th>${__(\"Created Date\")}</th></tr></thead>\n                            <tbody>\n                                ${linked_supplier_data.map((c,i) => `<tr><td>${i+1}</td><td>${c.parenttype}</td><td>${c.parent}</td>\n                                    <td>${c.join_date}</td></tr>`\n                                ).join('')}\n                            </tbody>\n                        </table>`\n                    $(cur_frm.fields_dict.linked_supplier_data.wrapper).html(html);\n                }\n            }\n        });\n    }\n    }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Supplier Engagement Report Settings", 
  "modified": "2018-06-24 01:39:20.157677", 
  "name": "Supplier Engagement Report Settings-Client", 
  "script": "    frappe.ui.form.on(\"Supplier Engagement Report Settings\", \"yellow_zone_start_value\", function (frm) {\n        cur_frm.set_value(\"red_zone_end_value\", frm.doc.yellow_zone_start_value);\n        \n        frm.doc.yellow_zone_start_value!=null?(val1=parseFloat(frm.doc.yellow_zone_start_value.toPrecision(2))+0.1):(val1='not set');\n        frm.doc.yellow_zone_end_value!=null?(val2=parseFloat(frm.doc.yellow_zone_end_value.toPrecision(2))+0.0):(val2='not set');\n        cur_frm.set_value(\"note\", \"Color 2 will be shown between \"+val1 +\" and \"+val2);\n\n        \n    });\n\n\n    frappe.ui.form.on(\"Supplier Engagement Report Settings\", \"yellow_zone_end_value\", function (frm) {\n        cur_frm.set_value(\"green_zone_start_value\", frm.doc.yellow_zone_end_value);\n        frm.doc.yellow_zone_start_value!=null?(val1=parseFloat(frm.doc.yellow_zone_start_value.toPrecision(2))+0.1):(val1='not set');\n        frm.doc.yellow_zone_end_value!=null?(val2=parseFloat(frm.doc.yellow_zone_end_value.toPrecision(2))+0.0):(val2='not set');\n        cur_frm.set_value(\"note\", \"Color 2 will be shown between \"+val1 +\" and \"+val2)\n    });\n\n    frappe.ui.form.on(\"Supplier Engagement Report Settings\", \"onload\", function (frm) {\n        cur_frm.set_value(\"red_zone_end_value\", frm.doc.yellow_zone_start_value);\n        cur_frm.set_value(\"green_zone_start_value\", frm.doc.yellow_zone_end_value);\n        frm.doc.yellow_zone_start_value!=null?(val1=parseFloat(frm.doc.yellow_zone_start_value.toPrecision(2))+0.1):(val1='not set');\n        frm.doc.yellow_zone_end_value!=null?(val2=parseFloat(frm.doc.yellow_zone_end_value.toPrecision(2))+0.0):(val2='not set');\n        cur_frm.set_value(\"note\", \"Color 2 will be shown between \"+val1 +\" and \"+val2)\n    });", 
  "script_type": "Client"
 }
]