{% extends "templates/web.html" %}
{% block title %}{{ _("Empowery Supplier Partners") }}{% endblock %}
{% block style %}{% include "empowery_co_op/www/supplier_list.css" %}{% endblock %}

{% macro location_view_class(vendor_name) -%}
{% if vendor_name ==" " %}
{{scrub(vendor_name|replace("&","and")|replace("/","sub"))|replace("|"," ")}}
{% else %}
{{scrub(vendor_name|replace("&","and")|replace("/","sub"))|replace("|"," ")}}
{%endif %}

{%- endmacro %}

{% macro supplier_category_options(vendor_category) -%}
{{scrub(vendor_category|replace("&","and"))|replace("/","sub")}}
{%- endmacro %}

{% macro location_category_options(vendor_category) -%}
{{scrub(vendor_category|replace("&","and"))|replace("/","sub")}}
{%- endmacro %}

{% block page_content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            {% include "templates/includes/slideshow.html" %}
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12 text-center head_text">
            <h4 class="title">{{_("Check off the programs you're interested in "|safe)}}
                <br>{{_("then complete the form at the bottom of this page.")}} </h4>

            <b>{{_("Show programs for")}}</b>
            <select id="service_category_selector">
                <option value="all_category" selected="selected">{{_("All Categories")}}</option>
                {% for vendor in vendor_category_list %}
                {% autoescape false %}
                <option value="{{supplier_category_options(vendor.service_category)}}">
                    {% endautoescape %}
                    {{ _(vendor.service_category) }}
                </option>
                {% endfor %}
            </select>
            <b>{{_("in :")}}</b>
            <select id="location_category_selector">
                <option value="all_location" selected="selected"></option>
                {% for vendor in vendor_location_list %}
                {% autoescape false %}
                <option value="{{location_category_options(vendor.location_category)}}">
                    {% endautoescape %}
                    {{ _(vendor.location_category) }}
                </option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            <ul>
                <h4>{{_("Supplier Partners")}}</h4>

                {% for vendor in vendor_supplier %}

                {% autoescape false %}
                {% if location_category[vendor.name] is defined %}
                 <!-- starting div of css show / hide -->
                    <div  class="{{location_view_class(location_category[vendor.name])}}">
                    {% else %}
                    <div  class="{{location_view_class('')}}">
                {%endif %}
                {% endautoescape %}

                <li class="sm-program">
                	<label>
                		<div class="col-xs-1">
                        	<input type="checkbox" value="{{vendor.name}}" />
                        </div>
                        <div class="col-sm-4 hidden-xs">
                        	<img itemprop="image" src="{{vendor.image}}" class="img-responsive img-thumbnail sidebar-image">
                        </div>
                        <div class="col-sm-7 col-xs-10">
                       		<h4> {{vendor.service_category}} </h4>
                            
                            {% if vendor.offer_expiration_date is not none %}
                                <div >{{vendor.offer_headline|replace("{exp_dt}",vendor.offer_expiration_date.strftime("%m/%d/%y"))}}</div>
                            {% else %}
                                <div >{{vendor.offer_headline}}</div>
                            {%endif %}
                            
                            <div >{{vendor.offer_summary}}</div>
                            <a class="anchor" data-toggle="collapse" href="#suppliercollapse{{loop.index}}"> {{_("More detail")}} </a>
                        </div>
                        {% if (vendor.more_details)=="guest" -%}
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <!-- <div class="panel-heading">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#suppliercollapse{{loop.index}}">
                                            {{_("More detail")}}</a>
                                </div>-->
                                <div id="suppliercollapse{{loop.index}}" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        {{_("Sorry, you need to be a member.")}} <a href="{{url}}/membership">{{_("Click
                                            here to join.")}}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% else %}
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#suppliercollapse{{loop.index}}">
                                            {{_("More detail")}}</a>
                                    </h4>
                                </div>
                                <div id="suppliercollapse{{loop.index}}" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div>{{vendor.more_details|safe}}</div>
                                        {% autoescape false %}
                                        <!-- Trigger/Open The Modal -->
                                        <a href="#supplier_{{loop.index}}" data-toggle="modal" data-target="#supplier_{{loop.index}}">{{_("Disclaimer")}}</a>
                                        <!-- Modal -->
                                        <div class="modal fade" id="supplier_{{loop.index}}" role="dialog">
                                            <div class="modal-dialog">
                                                <!-- Modal content-->
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <div class="modal-title">{{vendor.name}} {{_("Disclaimer")}}</div>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>{{vendor.disclaimer_details|safe}}</p>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endautoescape %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {%- endif %}
                	</label>
                </li>
                
                 <!-- ending div of css show / hide -->
            </div>
                {% endfor %}
            </ul>
        </div>


        <div class="col-sm-6">
            <ul>
                <h4>{{_("Affiliate Partners")}}</h4>

                {% for vendor in vendor_affiliate %}

                    {% autoescape false %}
                    {% if location_category[vendor.name] is defined %}
                    <!-- starting div of css show / hide -->
                    <div class="{{location_view_class(location_category[vendor.name])}}">
                    {% else %}
                    <div class="{{location_view_class('')}}">
                    {%endif %}
                    {% endautoescape %}
                 
                    <li>
                        <input type="checkbox" value="{{vendor.name}}" />
                        <img itemprop="image" src="{{vendor.image}}" class="img-responsive img-thumbnail sidebar-image"
                            style="max-height:25%; max-width:25%;">{{vendor.service_category}}
                        
                            {% if vendor.offer_expiration_date is not none %}
                                <div>{{vendor.offer_headline|replace("{exp_dt}",vendor.offer_expiration_date.strftime("%m/%d/%y"))}}</div>
                            {% else %}
                                <div>{{vendor.offer_headline}}</div>
                            {%endif %}
                            
                            <div>{{vendor.offer_summary}}</div>

                        {% if (vendor.more_details)=="guest" -%}
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#affiliatecollapse{{loop.index}}">
                                            {{_("More detail")}}</a>
                                    </h4>
                                </div>
                                <div id="affiliatecollapse{{loop.index}}" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        {{_("Sorry, you need to be a member.")}} <a href="{{url}}/membership">{{_("Click
                                            here to join.")}}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% else %}
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#affiliatecollapse{{loop.index}}">
                                            {{_("More detail")}}</a>
                                    </h4>
                                </div>
                                <div id="affiliatecollapse{{loop.index}}" class="panel-collapse collapse">
                                    <div class="panel-body">{{vendor.more_details|safe}}
                                        {% autoescape false %}
                                        <a href="#affiliate_{{loop.index}}" data-toggle="modal" data-target="#affiliate_{{loop.index}}">{{_("Disclaimer")}}</a>
                                        <!-- Modal -->
                                        <div class="modal fade" id="affiliate_{{loop.index}}" role="dialog">
                                            <div class="modal-dialog">
                                                <!-- Modal content-->
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <h4 class="modal-title">{{vendor.name}} {{_("Disclaimer")}}</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>{{vendor.disclaimer_details|safe}}</p>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endautoescape %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {%- endif %}
                
                </li>
                 <!-- ending div of css show / hide -->
            </div>
              
            {% endfor %}
           
            </ul>
        </div>
    </div>




    <!-- Modal -->
    <div class="modal fade" id="myOutput{{disclaimer_details}}" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">head</h4>
                </div>
                <div class="modal-body">
                    <p>{{ disclaimer_details }}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}